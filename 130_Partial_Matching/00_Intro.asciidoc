[[partial-matching]]
== 部分匹配

敏锐的读者会注意，目前为止本书介绍的所有查询都是针对整个词的操作。((("partial matching")))为了能匹配，只能查找倒排索引中存在的词，最小的单元为单个词。

但如果想匹配部分而不是全部的词该怎么办？ _部分匹配_ 允许用户指定查找词的一部分并找出所有包含这部分片段的词。

与想象的不太一样，对词进行部分匹配的需求在全文搜索引擎领域并不常见，但是如果读者有 SQL 方面的背景，可能会在某个时候实现一个 _低效的全文搜索_ 用下面的 SQL 语句对全文进行搜索：

[source,js]
--------------------------------------------------
    WHERE text LIKE "%quick%"
      AND text LIKE "%brown%"
      AND text LIKE "%fox%" <1>
--------------------------------------------------

<1> `*fox*` 会与 “fox” 和 “foxes” 匹配。

当然， Elasticsearch 提供分析过程，倒排索引让我们不需要使用这种粗笨的技术。为了能应对同时匹配 “fox” 和 “foxes” 的情况，只需简单的将它们的词干作为索引形式，没有必要做部分匹配。

也就是说，在某些情况下部分匹配会比较有用，((("partial matching", "common use cases")))常见的应用如下：

* 匹配邮编、产品序列号或其他 `not_analyzed` 未分析值，这些值可以是以某个特定前缀开始，也可以是与某种模式匹配的，甚至可以是与某个正则式相匹配的。

* _输入即搜索（search-as-you-type）_ ——在用户键入搜索词过程的同时就呈现最可能的结果。

* 匹配如德语或荷兰语这样有长组合词的语言，如： _Weltgesundheitsorganisation_ （世界卫生组织，英文 World Health Organization）。

本章始于检验 `not_analyzed` 精确值字段的前缀匹配。
